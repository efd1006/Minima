{"version":3,"sources":["./src/app/pages/history/history.page.html","./src/app/pages/history/history.module.ts","./src/app/pages/history/history.page.scss","./src/app/pages/history/history.page.ts","./src/app/service/history.service.ts"],"names":[],"mappings":"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","file":"pages-history-history-module-es2015.js","sourcesContent":["module.exports = \"<ion-app>\\n  <ion-header>\\n    <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-menu-button></ion-menu-button>\\n        </ion-buttons>\\n      <ion-title color=\\\"primary\\\">Transaction History</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  \\n  <ion-content>\\n    <ion-card>\\n      <ion-card-header>\\n        Recent Activity\\n      </ion-card-header>\\n    <ion-card-content>\\n  \\n<ion-item *ngIf=\\\"t_summaryArr.length < 1\\\" lines=\\\"none\\\">\\n<ion-text style=\\\"font-family: Aeonik-light;\\\">No activities to display.</ion-text>\\n</ion-item>\\n\\n  <ion-list *ngFor=\\\"let transaction of t_summaryArr;\\\">\\n    <a *ngFor=\\\"let trans of transaction.txpow.txn.outputs\\\">\\n  <ion-grid><ion-row>\\n  <ion-item *ngIf=\\\"t_summaryArr.length >= 1;\\\" detail class=\\\"activity\\\"\\n  (click)=\\\"presentHistoryInfo($event, \\n              trans.address,\\n              transaction.txpow.block, \\n              transaction.value, \\n              transaction.txpow.isblock, \\n              transaction.txpow.txpowid, \\n              transaction.txpow.parent, \\n              transaction.txpow.blkdiff, \\n              transaction.txpow.date.substring(11,16))\\\">\\n\\n  <ion-col class=\\\"col-month\\\" fixed=\\\"true\\\">\\n\\n  <ion-label>\\n  <h1 id=\\\"month\\\">\\n  {{ transaction.txpow.date.substring(4, 7) }} \\n  </h1>\\n  <p id=\\\"day\\\">\\n  {{ transaction.txpow.date.substring(8, 10) }}\\n  </p>\\n  </ion-label>\\n\\n  </ion-col>\\n\\n  <ion-col class=\\\"col-transtype\\\" fixed=\\\"true\\\">\\n\\n  <ion-label id=\\\"transaction\\\">\\n  <h2 class=\\\"h2-type\\\">\\n  {{ checkTransType(transaction.value) }} Minima\\n  </h2>\\n\\n  <a *ngFor=\\\"let input of transaction.txpow.txn.inputs\\\">\\n\\n  <p class=\\\"p-tokenid\\\">\\n  Token Id: {{ input.tokenid.substring(0, 10) }}\\n  </p>\\n\\n  </a>\\n\\n  </ion-label>\\n\\n  </ion-col>\\n\\n  <ion-col class=\\\"col-transamnt\\\" fixed=\\\"true\\\">\\n\\n  <ion-label class=\\\"amount\\\">\\n  <h2 class=\\\"amount-h2\\\">\\n  {{ transaction.value + \\\" \\\" }} MINI\\n  </h2>\\n  </ion-label>\\n\\n  </ion-col>\\n\\n  </ion-item>\\n\\n\\n  \\n  </ion-row></ion-grid>\\n  </a>\\n  </ion-list>\\n\\n\\n\\n  <!-- SKELETON FOR UX LOADING -->\\n<div *ngIf=\\\"t_summaryArr.length < 1\\\">\\n<ion-list *ngFor=\\\"let length of t_summarySpoof\\\">\\n  <ion-grid><ion-row>\\n  <ion-item detail class=\\\"activity\\\">\\n  \\n  <ion-col class=\\\"col-month\\\" fixed=\\\"true\\\">\\n    <ion-label>\\n    <h1 id=\\\"month\\\">\\n      <ion-skeleton-text animated style=\\\"width: 10%; height: 10%;\\\"></ion-skeleton-text>\\n    </h1>\\n    <p id=\\\"day\\\">\\n      <ion-skeleton-text animated style=\\\"width: 5%\\\"></ion-skeleton-text>\\n    </p>\\n    </ion-label>\\n  </ion-col>\\n\\n<ion-col class=\\\"col-transtype\\\" fixed=\\\"true\\\">\\n  <ion-label id=\\\"transaction\\\">\\n    <h2 class=\\\"h2-type\\\">\\n      <ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text>\\n    </h2>\\n    <p class=\\\"p-tokenid\\\">\\n      <ion-skeleton-text animated style=\\\"width: 30%\\\"></ion-skeleton-text>\\n    </p>\\n  </ion-label>\\n</ion-col>\\n\\n<ion-col class=\\\"col-transamnt\\\" fixed=\\\"true\\\">\\n  <ion-label class=\\\"amount\\\">\\n    <h2 class=\\\"amount-h2\\\">\\n      <ion-skeleton-text animated style=\\\"width: 60%\\\"></ion-skeleton-text>\\n    </h2>\\n  </ion-label> \\n</ion-col>\\n</ion-item>\\n\\n</ion-row></ion-grid>\\n</ion-list>\\n</div>\\n\\n</ion-card-content>\\n</ion-card>\\n  \\n  </ion-content>\\n  </ion-app>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HistoryPage } from './history.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistoryPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [HistoryPage]\n})\nexport class HistoryPageModule {}\n","module.exports = \".date {\\n  display: block;\\n}\\n\\n.amount {\\n  margin-left: 120px;\\n}\\n\\n.ios .amount {\\n  margin-left: 0px;\\n}\\n\\n.md .amount {\\n  margin-left: 0px;\\n}\\n\\n.activity {\\n  width: 100%;\\n}\\n\\n.activity:hover {\\n  background-color: grey;\\n}\\n\\n.activity div h1 {\\n  font-size: 14px;\\n  text-transform: uppercase;\\n}\\n\\n.amount {\\n  text-align: center;\\n}\\n\\n#month {\\n  font-size: 12px;\\n  color: #00AAC7;\\n}\\n\\n#day {\\n  font-size: 14px;\\n  color: #FF671D;\\n}\\n\\n.h2-type {\\n  font-size: 14px;\\n}\\n\\n.p-tokenid {\\n  font-size: 12px;\\n}\\n\\n.amount-p {\\n  font-size: 14px;\\n}\\n\\n.amount-h2 {\\n  font-size: 14px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9lbGlhcy9Qcm9qZWN0cy9taW5pbWFjb3JlL21vYmlsZS1hcHAtZnJvbnQtZW5kL2FwcC9zcmMvYXBwL3BhZ2VzL2hpc3RvcnkvaGlzdG9yeS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2hpc3RvcnkvaGlzdG9yeS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxjQUFBO0FDQ0o7O0FEQ0E7RUFDSSxrQkFBQTtBQ0VKOztBREFBO0VBQ0ksZ0JBQUE7QUNHSjs7QUREQTtFQUNJLGdCQUFBO0FDSUo7O0FERkE7RUFDSSxXQUFBO0FDS0o7O0FERkE7RUFDSSxzQkFBQTtBQ0tKOztBREhBO0VBQ0ksZUFBQTtFQUNBLHlCQUFBO0FDTUo7O0FESEE7RUFDSSxrQkFBQTtBQ01KOztBREhBO0VBQ0ksZUFBQTtFQUNBLGNBQUE7QUNNSjs7QURKQTtFQUNJLGVBQUE7RUFDQSxjQUFBO0FDT0o7O0FESkE7RUFDSSxlQUFBO0FDT0o7O0FETEE7RUFDSSxlQUFBO0FDUUo7O0FETkE7RUFDSSxlQUFBO0FDU0o7O0FEUEE7RUFDSSxlQUFBO0FDVUoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9oaXN0b3J5L2hpc3RvcnkucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmRhdGUge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xufVxuLmFtb3VudCB7XG4gICAgbWFyZ2luLWxlZnQ6IDEyMHB4O1xufVxuLmlvcyAuYW1vdW50IHtcbiAgICBtYXJnaW4tbGVmdDogMHB4O1xufVxuLm1kIC5hbW91bnQge1xuICAgIG1hcmdpbi1sZWZ0OiAwcHg7XG59XG4uYWN0aXZpdHkge1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG4uYWN0aXZpdHk6aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG59XG4uYWN0aXZpdHkgZGl2IGgxIHtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbn1cblxuLmFtb3VudCB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4jbW9udGgge1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBjb2xvcjogIzAwQUFDNztcbn1cbiNkYXkge1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBjb2xvcjogI0ZGNjcxRDtcblxufVxuLmgyLXR5cGUge1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbn1cbi5wLXRva2VuaWQge1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbn0gICBcbi5hbW91bnQtcCB7XG4gICAgZm9udC1zaXplOiAxNHB4O1xufVxuLmFtb3VudC1oMiB7XG4gICAgZm9udC1zaXplOiAxNHB4O1xufSIsIi5kYXRlIHtcbiAgZGlzcGxheTogYmxvY2s7XG59XG5cbi5hbW91bnQge1xuICBtYXJnaW4tbGVmdDogMTIwcHg7XG59XG5cbi5pb3MgLmFtb3VudCB7XG4gIG1hcmdpbi1sZWZ0OiAwcHg7XG59XG5cbi5tZCAuYW1vdW50IHtcbiAgbWFyZ2luLWxlZnQ6IDBweDtcbn1cblxuLmFjdGl2aXR5IHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5hY3Rpdml0eTpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG59XG5cbi5hY3Rpdml0eSBkaXYgaDEge1xuICBmb250LXNpemU6IDE0cHg7XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG59XG5cbi5hbW91bnQge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbiNtb250aCB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgY29sb3I6ICMwMEFBQzc7XG59XG5cbiNkYXkge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGNvbG9yOiAjRkY2NzFEO1xufVxuXG4uaDItdHlwZSB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbn1cblxuLnAtdG9rZW5pZCB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbn1cblxuLmFtb3VudC1wIHtcbiAgZm9udC1zaXplOiAxNHB4O1xufVxuXG4uYW1vdW50LWgyIHtcbiAgZm9udC1zaXplOiAxNHB4O1xufSJdfQ== */\"","import { MinimaApiService } from '../../service/minima-api.service';\nimport { PopoverController } from '@ionic/angular';\nimport { PopHistoryComponent } from '../../components/pop-history/pop-history.component';\nimport { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { HistoryService } from '../../service/history.service';\nimport { map } from 'rxjs/operators';\nimport { MiniHistory } from '../../models/minihistory.model';\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.page.html',\n  styleUrls: ['./history.page.scss'],\n})\nexport class HistoryPage implements OnInit {\n\n  // + vars\n  public t_summaryArr: MiniHistory[] = [];\n  public t_summarySpoof: MiniHistory[] = [];\n\n  polledHistorySubscription: Subscription;\n\n  // - vars\n  private lastJSON: string = '';\n\n  constructor(public popHistoryController: PopoverController,\n             private api: MinimaApiService,\n             private historyService: HistoryService) {}\n\n  ngOnInit() {}\n\n  ionViewDidEnter(){\n    this.pullInHistoryLength();\n    setTimeout(() => {\n      this.pullInHistorySummary(); // subscribe and polls history\n    }, 1000);\n   \n  }\n\n  ionViewDidLeave(){\n   this.polledHistorySubscription.unsubscribe();\n  }\n\n  // Present history details popover when tapped/clicked\n  async presentHistoryInfo(ev: any, _addr: any, _blkNumber: any, _amnt: any,\n                       _isBlock: boolean, _txpowid: string, _parent: string,\n                        _blockdiff: number, _date: string ) {\n    const popover = await this.popHistoryController.create({\n      component: PopHistoryComponent,\n      cssClass: 'history-popover',\n      event: ev,\n      translucent: true,\n      componentProps: {\n\n           address: _addr,\n           blockNumber: _blkNumber,\n           transAmount: _amnt,\n           isBlock: _isBlock,\n           txpowid: _txpowid,\n           parent: _parent,\n           blockdiff: _blockdiff,\n           date: _date,\n          \n          },\n    });\n    return await popover.present();\n  }\n\n  // Check if we're receiving or sending\n  checkTransType(amount: any) {\n    if(amount.toString().substring(0,1) === \"-\"){\n      return \"Sent\";\n    } else {\n      return \"Received\";\n    }\n  }\n\n  //LATER USE, history order\n  getUserOrderPref() {\n    if(true){\n    return 't_summaryArr.slice().reverse()';\n    } else {\n    return 't_summaryArr';\n  }\n  }\n  // get length of history\n  pullInHistoryLength() {\n    this.historyService.getHistory().subscribe(res => {\n      for(const i in res.response.history){\n      this.t_summarySpoof.push(res.response.history[i]);\n      }\n    });\n  }\n  \n  // Get all users transaction history\n  pullInHistorySummary() {\n  this.polledHistorySubscription = this.historyService.getHistory().pipe(map(responseData => {\n    let historyArr: MiniHistory[] = [];\n    for(const key in responseData.response){\n      let history = responseData.response;\n        if(history[key]){\n\n          //Transaction description summary\n          historyArr = history[key];\n          \n        }\n        return historyArr;\n    }\n  })).subscribe(responseData => {\n    \n    if(this.lastJSON !== JSON.stringify(responseData)){\n      this.t_summaryArr = responseData;\n      this.lastJSON = JSON.stringify(responseData);\n    }\n\n  });\n    \n  }\n\n}\n","import { Tokens } from '../models/tokens.model';\nimport { environment } from './../../environments/environment.prod';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { map, concatMap, merge } from 'rxjs/operators';\nimport { Observable, timer, Subject } from 'rxjs';\nimport { MiniHistory } from '../models/minihistory.model';\n\n@Injectable({\n    providedIn: 'root'\n  })\nexport class HistoryService {\n\n  public polledHistory$: Observable<any>;\n  manualRefresh = new Subject();\n  private host = '';\n\n  constructor(private http: HttpClient) {\n      this.host = environment.defaultNode;\n      this.host = this.getHost();\n      }\n      \n    getHistory() {\n      return this.request('history');\n    }\n  \n    private getHost() {\n      if (localStorage.getItem('minima_host') == null) {\n        localStorage.setItem('minima_host', this.host);\n        return this.host;\n      } else {\n        return localStorage.getItem('minima_host');\n      }\n    }\n  \n    private request(route: any) {\n      let apiUrl = this.host + route; // this.host+'route' = \"127.0.0.1:8999/'balance'\"\n      let history$ = this.http.get(apiUrl);\n      \n      return this.polledHistory$ = timer(0, 2000).pipe(\n        \n        merge(this.manualRefresh),\n        concatMap(_ => history$),\n        map((res: {status: boolean, minifunc: string, message: string, response: {history: MiniHistory}}) => res)\n  \n  \n      );\n  }   \n}"],"sourceRoot":""}