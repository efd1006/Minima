{"version":3,"sources":["./src/app/pages/mini-status/mini-status.page.html","./src/app/pages/mini-status/mini-status.module.ts","./src/app/pages/mini-status/mini-status.page.scss","./src/app/pages/mini-status/mini-status.page.ts","./src/app/service/status.service.ts"],"names":[],"mappings":"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","file":"pages-mini-status-mini-status-module-es5.js","sourcesContent":["module.exports = \"<ion-app>\\n<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"primary\\\">\\n      Status\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n        <ion-list *ngIf=\\\"statusOfStatus === 'updated' \\\">\\n        <ion-list-header>\\n        Minima Node Status\\n        </ion-list-header>\\n          <ion-item>\\n            <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"start\\\" class=\\\"active-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Status</h2>\\n            <p *ngIf=\\\"status?.status === true\\\" class=\\\"status-on\\\"> Online</p>\\n            <p *ngIf=\\\"status?.status === false\\\" class=\\\"status-off\\\"> Offline</p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item>\\n            <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"start\\\" class=\\\"active-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Node uptime</h2>\\n            <p>{{ status?.response.uptime }}</p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item>\\n            <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"start\\\" class=\\\"active-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Configuration path</h2>\\n            <p>{{ status?.response.conf }}</p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item>\\n            <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"start\\\" class=\\\"active-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Hosting IP</h2>\\n            <p>{{ status?.response.host +':' }}{{ status?.response.port }}</p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item>\\n            <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"start\\\" class=\\\"active-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>RPC Port</h2>\\n            <p>{{ status?.response.rpcport }}</p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item lines=\\\"none\\\">\\n            <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"start\\\" class=\\\"active-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Last block number</h2>\\n            <p>{{ status?.response.lastblock }}</p>\\n            </ion-label>\\n          </ion-item>\\n        </ion-list>\\n\\n        <!-- SKELETON UX FOR LOADING -->\\n        <div *ngIf=\\\"statusOfStatus === 'empty'\\\">\\n        <ion-list>\\n        <ion-list-header>\\n        Minima Node Status\\n        </ion-list-header>\\n          <ion-item>\\n            <ion-icon name=\\\"timer\\\" slot=\\\"start\\\" class=\\\"inactive-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Status</h2>\\n            <p> <ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text></p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item>\\n            <ion-icon name=\\\"timer\\\" slot=\\\"start\\\" class=\\\"inactive-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Node uptime</h2>\\n            <p> <ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text></p>\\n            <p> <ion-skeleton-text animated style=\\\"width: 25%\\\" [hidden]=\\\"checkPlatform()\\\" ></ion-skeleton-text></p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item>\\n            <ion-icon name=\\\"timer\\\" slot=\\\"start\\\" class=\\\"inactive-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Configuration path</h2>\\n            <p> <ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text></p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item>\\n            <ion-icon name=\\\"timer\\\" slot=\\\"start\\\" class=\\\"inactive-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Hosting IP</h2>\\n            <p> <ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text></p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item>\\n            <ion-icon name=\\\"timer\\\" slot=\\\"start\\\" class=\\\"inactive-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>RPC Port</h2>\\n            <p> <ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text></p>\\n            </ion-label>\\n          </ion-item>\\n          <ion-item lines=\\\"none\\\">\\n            <ion-icon name=\\\"timer\\\" slot=\\\"start\\\" class=\\\"inactive-icons\\\"></ion-icon>\\n            <ion-label>\\n            <h2>Last block number</h2>\\n            <p> <ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text></p>\\n            </ion-label>\\n          </ion-item>\\n        </ion-list>\\n        </div>\\n\\n</ion-content>\\n\\n<ion-footer>\\n     <ion-list lines=\\\"none\\\">\\n       <ion-item>\\n       <ion-icon slot=\\\"start\\\" name=\\\"notifications\\\"></ion-icon>\\n       <p>Call \\\"status\\\" in \\n         <a style=\\\"font-style: normal;\\\" routerLink=\\\"/mini-term\\\">terminal</a> for more details of the node's status.</p> \\n      </ion-item>\\n     </ion-list>\\n</ion-footer>\\n</ion-app>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MiniStatusPage } from './mini-status.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MiniStatusPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MiniStatusPage]\n})\nexport class MiniStatusPageModule {}\n","module.exports = \"#status-content {\\n  width: 100%;\\n  padding: 5px;\\n  border-radius: 20%;\\n  font-size: 0.5em;\\n}\\n\\n#status-content ion-icon {\\n  padding-left: 1em;\\n  color: #FF671D;\\n}\\n\\n#status-content ion-list ion-grid ion-col ion-item {\\n  font-size: 1.5em;\\n}\\n\\n.ion-text-wrap {\\n  word-wrap: normal;\\n}\\n\\nion-list ion-item h2 {\\n  color: #06AAC7;\\n}\\n\\nion-list ion-item p {\\n  white-space: normal;\\n}\\n\\n.active-icons {\\n  color: #06AAC7;\\n}\\n\\n.inactive-icons {\\n  color: #FF671D;\\n}\\n\\nion-footer ion-list ion-item {\\n  border-top: 2px solid #ffffcc;\\n  border-bottom: 2px solid #ffffcc;\\n  border-radius: 5px;\\n}\\n\\nion-list-header {\\n  font-size: 1rem;\\n  padding: 25px;\\n}\\n\\n.status-on {\\n  color: #3FBF3F;\\n}\\n\\n.status-off {\\n  color: #f2f2f2;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9lbGlhcy9Qcm9qZWN0cy9taW5pbWFjb3JlL21vYmlsZS1hcHAtZnJvbnQtZW5kL2FwcC9zcmMvYXBwL3BhZ2VzL21pbmktc3RhdHVzL21pbmktc3RhdHVzLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvbWluaS1zdGF0dXMvbWluaS1zdGF0dXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0FDREo7O0FESUE7RUFDSSxpQkFBQTtFQUNBLGNBQUE7QUNESjs7QURJQTtFQUNJLGdCQUFBO0FDREo7O0FESUE7RUFDSSxpQkFBQTtBQ0RKOztBRElBO0VBQ0ksY0FBQTtBQ0RKOztBRElBO0VBQ0ksbUJBQUE7QUNESjs7QURJQTtFQUNJLGNBQUE7QUNESjs7QURJQTtFQUNJLGNBQUE7QUNESjs7QURJQTtFQUNJLDZCQUFBO0VBQ0EsZ0NBQUE7RUFDQSxrQkFBQTtBQ0RKOztBRElBO0VBQ0ksZUFBQTtFQUNBLGFBQUE7QUNESjs7QURLQTtFQUNJLGNBQUE7QUNGSjs7QURJQTtFQUNJLGNBQUE7QUNESiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21pbmktc3RhdHVzL21pbmktc3RhdHVzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG4jc3RhdHVzLWNvbnRlbnQge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmc6IDVweDtcbiAgICBib3JkZXItcmFkaXVzOiAyMCU7XG4gICAgZm9udC1zaXplOiAwLjVlbTtcbn1cblxuI3N0YXR1cy1jb250ZW50IGlvbi1pY29uIHtcbiAgICBwYWRkaW5nLWxlZnQ6IDFlbTtcbiAgICBjb2xvcjogI0ZGNjcxRDtcbn1cblxuI3N0YXR1cy1jb250ZW50IGlvbi1saXN0IGlvbi1ncmlkIGlvbi1jb2wgaW9uLWl0ZW0ge1xuICAgIGZvbnQtc2l6ZTogMS41ZW07XG59XG5cbi5pb24tdGV4dC13cmFwIHtcbiAgICB3b3JkLXdyYXA6IG5vcm1hbDtcbn1cblxuaW9uLWxpc3QgaW9uLWl0ZW0gaDIge1xuICAgIGNvbG9yOiAjMDZBQUM3O1xufVxuXG5pb24tbGlzdCBpb24taXRlbSBwIHtcbiAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xufVxuXG4uYWN0aXZlLWljb25zIHtcbiAgICBjb2xvcjogIzA2QUFDNztcblxufVxuLmluYWN0aXZlLWljb25ze1xuICAgIGNvbG9yOiAjRkY2NzFEO1xufVxuXG5pb24tZm9vdGVyIGlvbi1saXN0IGlvbi1pdGVtIHtcbiAgICBib3JkZXItdG9wOiAycHggc29saWQgI2ZmZmZjYztcbiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQjZmZmZmNjO1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cblxuaW9uLWxpc3QtaGVhZGVyIHtcbiAgICBmb250LXNpemU6IDEuMHJlbTtcbiAgICBwYWRkaW5nOiAyNXB4O1xufVxuXG5cbi5zdGF0dXMtb24ge1xuICAgIGNvbG9yOiAjM0ZCRjNGO1xufVxuLnN0YXR1cy1vZmYge1xuICAgIGNvbG9yOiAjZjJmMmYyXG59XG5cblxuIiwiI3N0YXR1cy1jb250ZW50IHtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDVweDtcbiAgYm9yZGVyLXJhZGl1czogMjAlO1xuICBmb250LXNpemU6IDAuNWVtO1xufVxuXG4jc3RhdHVzLWNvbnRlbnQgaW9uLWljb24ge1xuICBwYWRkaW5nLWxlZnQ6IDFlbTtcbiAgY29sb3I6ICNGRjY3MUQ7XG59XG5cbiNzdGF0dXMtY29udGVudCBpb24tbGlzdCBpb24tZ3JpZCBpb24tY29sIGlvbi1pdGVtIHtcbiAgZm9udC1zaXplOiAxLjVlbTtcbn1cblxuLmlvbi10ZXh0LXdyYXAge1xuICB3b3JkLXdyYXA6IG5vcm1hbDtcbn1cblxuaW9uLWxpc3QgaW9uLWl0ZW0gaDIge1xuICBjb2xvcjogIzA2QUFDNztcbn1cblxuaW9uLWxpc3QgaW9uLWl0ZW0gcCB7XG4gIHdoaXRlLXNwYWNlOiBub3JtYWw7XG59XG5cbi5hY3RpdmUtaWNvbnMge1xuICBjb2xvcjogIzA2QUFDNztcbn1cblxuLmluYWN0aXZlLWljb25zIHtcbiAgY29sb3I6ICNGRjY3MUQ7XG59XG5cbmlvbi1mb290ZXIgaW9uLWxpc3QgaW9uLWl0ZW0ge1xuICBib3JkZXItdG9wOiAycHggc29saWQgI2ZmZmZjYztcbiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmZmZmY2M7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cblxuaW9uLWxpc3QtaGVhZGVyIHtcbiAgZm9udC1zaXplOiAxcmVtO1xuICBwYWRkaW5nOiAyNXB4O1xufVxuXG4uc3RhdHVzLW9uIHtcbiAgY29sb3I6ICMzRkJGM0Y7XG59XG5cbi5zdGF0dXMtb2ZmIHtcbiAgY29sb3I6ICNmMmYyZjI7XG59Il19 */\"","import { Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { StatusService } from './../../service/status.service';\nimport { Component, OnInit, ChangeDetectorRef, Input } from '@angular/core';\nimport { Status } from '../../models/status.model';\nimport { Platform } from '@ionic/angular';\n\n@Component({\n  selector: 'app-mini-status',\n  templateUrl: './mini-status.page.html',\n  styleUrls: ['./mini-status.page.scss'],\n  providers: [ StatusService ] \n})\n\nexport class MiniStatusPage implements OnInit {\n\n  status: { status: boolean, minifunc: string, response: Status};\n  statusSubscription: Subscription;\n\n  public statusOfStatus: string = 'empty';\n  public lastJSON: string;\n\n  // - vars\n  private host = '';\n  private loader: any = null;\n\n  constructor(private service: StatusService, private ref: ChangeDetectorRef, private plat: Platform) {}\n \n  ngOnInit() { }\n\n  ionViewWillEnter() {\n    setTimeout(() => {\n      this.updateStatus(); // subscribes & polls status\n      this.statusOfStatus = 'updated';\n    }, 500);\n  }\n\n  ionViewWillLeave(){\n   this.statusSubscription.unsubscribe(); // unsubs\n  }\n\n  getImg() {\n    if(document.body.classList.value === 'dark'){\n      return '../../assets/fulllogodark.svg';\n    } else {\n      return '../../assets/fulllogo.svg';\n    }\n  }\n\n  checkPlatform(): Boolean {\n    if(this.plat.is('ios') || this.plat.is('android')){\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  updateStatus() {\n\n    this.statusSubscription = this.service.getStatus()\n    .pipe(map(responseData => {\n      \n      const status = responseData;\n      \n      return status;\n    })\n    )\n    .subscribe((res : any) => {\n      \n      if(this.lastJSON != JSON.stringify(res)){\n        this.status = res;\n        this.statusOfStatus = 'updated';\n        this.lastJSON = JSON.stringify(res);\n      } \n      \n      \n    });\n  }\n  \n\n  \n}\n","import { Status } from '../models/status.model';\nimport { environment } from './../../environments/environment.prod';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable, ChangeDetectorRef } from '@angular/core';\nimport { Observable, Subscription, Subject } from 'rxjs';\nimport { map, concatMap, merge } from 'rxjs/operators';\nimport { timer } from 'rxjs/Observable/timer';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StatusService {\n\n  polledStatus$: Observable<any>;\n  manualRefresh = new Subject();\n\n  private host = '';\n  private loader: any = null;\n\n  constructor(private http: HttpClient, private ref: ChangeDetectorRef) {\n    this.host = environment.defaultNode;\n    this.host = this.getHost();\n   }\n   \n  getStatus(): Observable<{ status: boolean, minifunc: string, response: Status}> {\n    return this.request('status');\n  }\n\n  private getHost() {\n    if (localStorage.getItem('minima_host') == null) {\n      localStorage.setItem('minima_host', this.host);\n      return this.host;\n    } else {\n      return localStorage.getItem('minima_host');\n    }\n  }\n\n  doRefresh(event) {\n    this.manualRefresh.next('');\n    setTimeout( () => {\n      event.target.complete();\n    }, 1000);\n  }\n\n  private request(route: any) {\n    let apiUrl = this.host + route; // this.host+'route' = \"127.0.0.1:8999/'balance'\"\n    let status$ = this.http.get(apiUrl);\n    \n    return this.polledStatus$ = timer(0, 3000).pipe(\n      \n      merge(this.manualRefresh),\n      concatMap(_ => status$),\n      map((res: {status: boolean, minifunc: string, response: Status}) => res)\n\n\n    );\n  }\n\n\n    \n\n}"],"sourceRoot":""}