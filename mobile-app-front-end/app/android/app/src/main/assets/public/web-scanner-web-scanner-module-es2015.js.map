{"version":3,"sources":["./src/app/web-scanner/web-scanner.page.html","./src/app/web-scanner/web-scanner.module.ts","./src/app/web-scanner/web-scanner.page.scss","./src/app/web-scanner/web-scanner.page.ts"],"names":[],"mappings":"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","file":"web-scanner-web-scanner-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-menu-button slot=\\\"start\\\"></ion-menu-button>\\n    <ion-title color=\\\"primary\\\">Web</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n\\n<ion-content>\\n  <!-- <ion-toolbar>\\n    <ion-item lines=\\\"none\\\" class=\\\"web-img\\\">\\n      <ion-img class=\\\"web-img\\\" src=\\\"../assets/web.svg\\\"></ion-img>\\n    </ion-item>\\n    <ion-item class=\\\"web-img\\\" lines=\\\"none\\\">\\n      <ion-text class=\\\"web-lbl\\\" style=\\\"font-family: Aeonik-light; width:100%; text-align: center;\\\"> <br><br><br>Minima Web ready to scan. <br> Scan qr code below to begin.</ion-text>\\n    </ion-item>\\n  </ion-toolbar> -->\\n\\n\\n</ion-content>\\n\\n\\n\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-buttons>\\n      <ion-button class=\\\"qr-button\\\" expand=\\\"block\\\" (click)=\\\"stopCamera()\\\"  *ngIf=\\\"isCameraOpen===true\\\">\\n        Stop scanning\\n       </ion-button> \\n\\n      <ion-button class=\\\"qr-button\\\" (click)=\\\"scanQR()\\\" *ngIf=\\\"isCameraOpen===false\\\">\\n        <ion-icon name=\\\"qr-scanner\\\"></ion-icon> \\n        Scan Qr Code\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-footer>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { WebScannerPage } from './web-scanner.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: WebScannerPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [WebScannerPage]\n})\nexport class WebScannerPageModule {}\n","module.exports = \".qr-button {\\n  width: 100%;\\n  height: 40px;\\n}\\n\\n.qr-button:hover {\\n  height: 50px;\\n}\\n\\nion-icon {\\n  padding: 5px;\\n}\\n\\n.web-img {\\n  margin: auto;\\n  width: 300px;\\n  -webkit-box-align: center;\\n          align-items: center;\\n}\\n\\n.web-lbl {\\n  white-space: normal;\\n  height: 11vh !important;\\n  margin: auto;\\n  width: auto !important;\\n  -webkit-box-align: center;\\n          align-items: center;\\n  font-family: Aeonik-light;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9lbGlhcy9Qcm9qZWN0cy9taW5pbWFjb3JlL21vYmlsZS1hcHAtZnJvbnQtZW5kL2FwcC9zcmMvYXBwL3dlYi1zY2FubmVyL3dlYi1zY2FubmVyLnBhZ2Uuc2NzcyIsInNyYy9hcHAvd2ViLXNjYW5uZXIvd2ViLXNjYW5uZXIucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7QUNDSjs7QURDQTtFQUNJLFlBQUE7QUNFSjs7QURBQTtFQUNJLFlBQUE7QUNHSjs7QUREQTtFQUVJLFlBQUE7RUFFQSxZQUFBO0VBQ0EseUJBQUE7VUFBQSxtQkFBQTtBQ0VKOztBREVBO0VBQ0ksbUJBQUE7RUFDQSx1QkFBQTtFQUNBLFlBQUE7RUFDQSxzQkFBQTtFQUNBLHlCQUFBO1VBQUEsbUJBQUE7RUFDQSx5QkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvd2ViLXNjYW5uZXIvd2ViLXNjYW5uZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnFyLWJ1dHRvbiB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiA0MHB4O1xufVxuLnFyLWJ1dHRvbjpob3ZlciB7XG4gICAgaGVpZ2h0OiA1MHB4O1xufVxuaW9uLWljb24ge1xuICAgIHBhZGRpbmc6IDVweDtcbn1cbi53ZWItaW1nIHtcbiAgICAvLyBoZWlnaHQ6IDQwdmggIWltcG9ydGFudDtcbiAgICBtYXJnaW46IGF1dG87XG4gICAgLy8gd2lkdGg6IGF1dG8gIWltcG9ydGFudDtcbiAgICB3aWR0aDogMzAwcHg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBcblxufVxuLndlYi1sYmwge1xuICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7XG4gICAgaGVpZ2h0OiAxMXZoICFpbXBvcnRhbnQ7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBmb250LWZhbWlseTogQWVvbmlrLWxpZ2h0O1xuXG59XG4iLCIucXItYnV0dG9uIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogNDBweDtcbn1cblxuLnFyLWJ1dHRvbjpob3ZlciB7XG4gIGhlaWdodDogNTBweDtcbn1cblxuaW9uLWljb24ge1xuICBwYWRkaW5nOiA1cHg7XG59XG5cbi53ZWItaW1nIHtcbiAgbWFyZ2luOiBhdXRvO1xuICB3aWR0aDogMzAwcHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi53ZWItbGJsIHtcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgaGVpZ2h0OiAxMXZoICFpbXBvcnRhbnQ7XG4gIG1hcmdpbjogYXV0bztcbiAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZm9udC1mYW1pbHk6IEFlb25pay1saWdodDtcbn0iXX0= */\"","import { MinimaApiService } from './../service/minima-api.service';\nimport { AlertController } from '@ionic/angular';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner/ngx';\nimport { Component, OnInit, NgZone } from '@angular/core';\n\n@Component({\n  selector: 'app-web-scanner',\n  templateUrl: './web-scanner.page.html',\n  styleUrls: ['./web-scanner.page.scss'],\n})\nexport class WebScannerPage implements OnInit {\n\n  isCameraOpen: boolean = false;\n  private scanSub: any = null;\n  public data: any = {};\n  public getUUID: any;\n  ionApp = <HTMLElement>document.getElementsByTagName('ion-app')[0]; \n\n  constructor(private qrScanner: QRScanner,\n     private zone: NgZone,\n     public alertController: AlertController,\n     private api: MinimaApiService) {}\n\n  ngOnInit() {\n  }\n  \n  ionViewWillEnter(){\n   this.isCameraOpen = false;\n  }\n\n  ionViewWillLeave(){\n   this.stopCamera();\n  }\n\n  scanQR() {\n    this.qrScanner.prepare()\n      .then((status: QRScannerStatus) => {\n        if (status.authorized) {\n          // camera permission was granted\n          console.log('scanQR', status);\n          setTimeout(() => {\n            window.document.querySelectorAll('ion-content')\n                  .forEach(element => {\n                      const element1 = element.shadowRoot.querySelector('style');\n                      element1.innerHTML = element1.innerHTML\n                                                   .replace('--background:var(--ion-background-color,#fff);', '--background: transparent');\n                  });\n        }, 300);\n\n        this.qrScanner.show();\n        this.isCameraOpen = true;\n\n        this.scanSub = this.qrScanner.scan().subscribe((text: string) => {\n          console.log('Scanned something', text);\n          this.zone.run(()=>{\n            //alert(\"Scanned this ->>>\" + text);\n            \n            \n            this.stopCamera();\n            this.qrWebLink(text);\n            // window.document.querySelector('ion-content').classList.remove('.transparentBody');\n           \n            window.document.querySelectorAll('ion-content')\n                  .forEach(element => {\n                      const element1 = element.shadowRoot.querySelector('style');\n                      element1.innerHTML = element1.innerHTML\n                  .replace('--background: transparent', '--background:var(--ion-background-color,#fff);');\n            });\n            this.isCameraOpen = false;\n            })\n        }, (err) => {\n          console.log('Scanned failed', err);\n        })\n\n      } else if (status.denied) {\n        // camera permission was permanently denied\n        // you must use QRScanner.openSettings() method to guide the user to the settings page\n        // then they can grant the permission from there\n        console.log('error permission needed');\n        this.presentAlert('Please check camera permission','Error');\n      } else {\n        // permission was denied, but not permanently. You can ask for permission again at a later time.\n        console.log('error permission needed');\n        this.presentAlert('Please check camera permission','Error');\n      }\n    })\n    .catch((e: any) => console.log('Error is', e));\n  }\n\n  qrWebLink(text : any) {\n    this.data.url = text;\n    if(this.data.url!==''){\n    this.api.webLink(this.data).then((res : any) => {\n      console.log(\"weblink \" + JSON.stringify(res));\n        if(res.status === true){\n          this.presentAlert('Success!', 'You are now connected.');\n        } else {\n          alert(\"Hasn't connected\");\n          this.presentAlert(res.error, 'Error');\n        }\n      });\n    } else {\n      this.presentAlert('Please rescan qr image.', 'Unsucessful!');\n    }\n  }\n\n  stopCamera() {\n    console.log('stop camera', this.scanSub);\n    if(this.scanSub!==null){\n      console.log(\"stopCamera - is not null..\")\n      this.qrScanner.hide();\n      this.scanSub.unsubscribe();\n    }\n    this.scanSub = null;\n      window.document.querySelectorAll('ion-content')\n      .forEach(element => {\n          const element1 = element.shadowRoot.querySelector('style');\n          element1.innerHTML = element1.innerHTML\n      .replace('--background: transparent', '--background:var(--ion-background-color,#fff);');\n      });\n    this.ionApp.style.display = 'block';\n    this.isCameraOpen = false;\n    this.qrScanner.destroy();\n  }\n\n  async presentAlert(msg:string,header:string) {\n    const alert = await this.alertController.create({\n      header: header,\n      message: msg,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n}\n"],"sourceRoot":""}