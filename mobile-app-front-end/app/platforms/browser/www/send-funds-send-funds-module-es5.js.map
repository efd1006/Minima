{"version":3,"sources":["./src/app/send-funds/send-funds.page.html","./src/app/send-funds/send-funds.module.ts","./src/app/send-funds/send-funds.page.scss","./src/app/send-funds/send-funds.page.ts"],"names":[],"mappings":"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","file":"send-funds-send-funds-module-es5.js","sourcesContent":["module.exports = \"<ion-header *ngIf=\\\"isCameraOpen==false\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"primary\\\">\\n      Send funds\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card *ngIf=\\\"isCameraOpen==false\\\">\\n    <ion-card-header>\\n\\n      <ion-card-title>Send funds</ion-card-title>\\n    </ion-card-header>\\n\\n    <ion-card-content>\\n      <form>\\n\\n        <!-- <ion-item>\\n          <ion-label position=\\\"floating\\\">Minima / Token</ion-label>\\n          <ion-select \\n              name=\\\"token\\\" \\n              value=\\\"Minima\\\" \\n              [(ngModel)]=\\\"data.tokenid\\\" \\n              placeholder=\\\"Minima\\\">\\n\\n        <ion-select-option *ngFor=\\\"let token of data.tokenid\\\">{{ token }}</ion-select-option>\\n\\n            <ion-select-option value=\\\"minima\\\"></ion-select-option>\\n            <ion-select-option value=\\\"ethereum\\\">Ethereum</ion-select-option>\\n\\n          </ion-select>\\n        </ion-item> -->\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Address</ion-label>\\n          <ion-input name=\\\"address\\\" [(ngModel)]=\\\"data.address\\\"></ion-input>\\n        </ion-item>\\n\\n        <div class=\\\"rightAlign\\\">\\n          <ion-button type=\\\"button\\\" slot=\\\"end\\\" size=\\\"small\\\" (click)=\\\"scanQR()\\\">\\n            <ion-icon name=\\\"qr-scanner\\\" slot=\\\"start\\\"></ion-icon>QR Code\\n          </ion-button>\\n          <ion-button type=\\\"button\\\" slot=\\\"end\\\" size=\\\"small\\\" (click)=\\\"pasteFromClipboard()\\\">\\n            <ion-icon name=\\\"clipboard\\\" slot=\\\"start\\\"></ion-icon>Paste from clipboard\\n          </ion-button>\\n        </div>\\n        <ion-item>\\n          <ion-label position=\\\"floating\\\">Amount</ion-label>\\n          <ion-input type=\\\"number\\\" name=\\\"amount\\\" [(ngModel)]=\\\"data.amount\\\"></ion-input>\\n        </ion-item>\\n        \\n      </form>\\n\\n    </ion-card-content>\\n  </ion-card>\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-button expand=\\\"block\\\" (click)=\\\"stopCamera()\\\"  *ngIf=\\\"isCameraOpen==true\\\">\\n     Stop scanning\\n    </ion-button>    \\n\\n    <ion-button color=\\\"danger\\\" expand=\\\"block\\\" (click)=\\\"sendFunds()\\\" *ngIf=\\\"isCameraOpen==false\\\">\\n      <ion-icon name=\\\"send\\\" slot=\\\"start\\\"></ion-icon> Send\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-footer>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SendFundsPage } from './send-funds.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SendFundsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [SendFundsPage]\n})\nexport class SendFundsPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NlbmQtZnVuZHMvc2VuZC1mdW5kcy5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, NgZone } from '@angular/core';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner/ngx';\nimport { Clipboard } from '@ionic-native/clipboard/ngx';\nimport { AlertController } from '@ionic/angular';\nimport { MinimaApiService } from '../service/minima-api.service';\n\n@Component({\n  selector: 'app-send-funds',\n  templateUrl: './send-funds.page.html',\n  styleUrls: ['./send-funds.page.scss'],\n})\nexport class SendFundsPage implements OnInit {\n\n  private data: any = {};\n  isCameraOpen: boolean = false;\n  private scanSub:any=null;\n\n  constructor(private qrScanner: QRScanner, private clipboard: Clipboard, \n    public alertController: AlertController, private zone: NgZone, \n    private api: MinimaApiService) { }\n\n  ngOnInit() {\n  }\n\n\n  ionViewWillEnter() {\n    this.isCameraOpen = false;\n  }\n\n  ionViewWillLeave() {\n    this.stopCamera();\n  }\n\n  scanQR() {\n    this.qrScanner.prepare()\n      .then((status: QRScannerStatus) => {\n        if (status.authorized) {\n          // camera permission was granted\n          console.log('scanQR', status);\n\n          //add transparent BG to the ion app\n          window.document.querySelector('ion-app').classList.add('transparentBody');\n          // start scanning\n          this.qrScanner.show();\n          this.isCameraOpen = true;\n\n          this.scanSub = this.qrScanner.scan().subscribe((text: string) => {\n            console.log('Scanned something', text);\n            this.zone.run(()=>{\n              this.data.address = text;\n              this.stopCamera();\n              window.document.querySelector('ion-app').classList.remove('transparentBody');\n              this.isCameraOpen = false;\n            })\n\n          }, (err) => {\n            console.log('Scanned failed', err);\n          })\n\n        } else if (status.denied) {\n          // camera permission was permanently denied\n          // you must use QRScanner.openSettings() method to guide the user to the settings page\n          // then they can grant the permission from there\n          console.log('error permission needed');\n          this.presentAlert('Please check camera permission','Error');\n        } else {\n          // permission was denied, but not permanently. You can ask for permission again at a later time.\n          console.log('error permission needed');\n          this.presentAlert('Please check camera permission','Error');\n        }\n      })\n      .catch((e: any) => console.log('Error is', e));\n  }\n\n  stopCamera() {\n    console.log('stop camera',this.scanSub);\n    if(this.scanSub!==null){\n      console.log(\"stopCamera - is not null..\")\n      this.qrScanner.hide();\n      this.scanSub.unsubscribe();\n    }\n    this.scanSub = null;\n    window.document.querySelector('ion-app').classList.remove('transparentBody');\n    this.isCameraOpen = false;\n    this.qrScanner.destroy();\n  }\n\n  pasteFromClipboard() {\n    this.clipboard.paste().then(\n      (resolve: string) => {\n        this.data.address = resolve;\n      },\n      (reject: string) => {\n        console.log('Error: ' + reject);\n      }\n    );\n  }\n\n  async presentAlert(msg:string,header:string) {\n    const alert = await this.alertController.create({\n      header: header,\n      message: msg,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n  sendFunds(){\n    if(this.data.address&&this.data.address!==''&&this.data.amount&&this.data.amount>0){\n      console.log('sendFunds',this.data);\n      this.api.sendFunds(this.data).then((res:any)=>{\n      \n        console.log(\"Send \" + JSON.stringify(res));\n        if(res.status == true){\n          this.presentAlert('Sent successfully!', 'Info');\n        } else {\n          this.presentAlert(res.error, 'Error');\n        }\n      })\n    } else {\n      this.presentAlert('Please check the input fields', 'Error');\n    }\n  }\n\n}\n"],"sourceRoot":""}